<?xml version="1.0" encoding="UTF-8"?>
<kml xmlns="http://www.opengis.net/kml/2.2">
<Document>
    <name>{{ title }}</name>
    <description>{{ description }}</description>
{% for type,settings in types %}
{% if filter == null or type in (filter.type) %}
    <Style id="type_{{ type }}">
        <IconStyle>
            <scale>0.5</scale>
            <color>f0{{ settings.bbggrr }}</color>
            <Icon><href>http://maps.google.com/mapfiles/kml/paddle/wht-circle.png</href></Icon>
        </IconStyle>
    </Style>
    <Style id="type_{{ type }}_ex">
        <IconStyle>
            <scale>0.5</scale>
            <color>f0{{ settings.bbggrr }}</color>
            <Icon><href>http://maps.google.com/mapfiles/kml/paddle/wht-blank.png</href></Icon>
        </IconStyle>
    </Style>
{% endif %}
{% endfor %}
{% for signal in signals %}
    <Placemark>
        <name>{{ signal.call }} {{ (0 + signal.khz) }}KHz{% if signal.active != 1 %} (Inactive){% endif %}</name>
        <description>{{ signal.qth|raw }}, {{ signal.sp ? signal.sp ~ ', ' }}{{ signal.itu }}</description>
        <styleUrl>#type_{{ signal.type }}{% if signal.active != 1 %}_ex{% endif %}</styleUrl>
        <Point><coordinates>{{ signal.lon}},{{ signal.lat }}</coordinates></Point>
    </Placemark>
{% endfor %}
</Document>
</kml>